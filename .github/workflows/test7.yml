# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the dev branch
  push:
    branches: [ dev ]
  pull_request:
    branches: [ dev ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
jobs:
  edl-files-loader:
   strategy:
      max-parallel: 1
      matrix:
        currentEnvName: [devl, prod]
        include: 
          - { region: us-east-1, s3Bucket: jd-us01-commoninformationservices-devl-system, fileName: infrastructure/cloudformation_templates/edl-entitlement-key-manager.json, stackName: edl-entitlement-key-manager }
          - { region: us-east-1, s3-bucket: jd-us01-cis-devl-entitlement-keys, fileName: infrastructure/cloudformation_templates/edl-entitlement-key-manager-devl.json, stackName: edl-entitlement-key-manager }
          - { region: us-east-1, s3-bucket: jd-us01-commoninformationservices-devl-system, fileName: infrastructure/cloudformation_templates/edl-entitlement-key-manager.json, stackName: edl-entitlement-key-manager }
          - { region: us-east-1, s3-bucket: jd-us01-cis-devl-entitlement-keys, fileName: infrastructure/cloudformation_templates/edl-entitlement-key-manager-devl.json, stackName: edl-entitlement-key-manager }
        lambdas: [ edl-file-ingest-completion-lambda, edl-file-ingest-request-lambda ]
     steps:
     - name: Git checkout
       uses: actions/checkout@v2

     - name: echo ${{ matrix.currentEnvName }}

         
